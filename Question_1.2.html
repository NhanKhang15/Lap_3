<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: Arial, sans-serif; background:#f5f5f5; }
        .header { background:#333; color:#fff; padding:20px; display:flex; justify-content:space-between; align-items:center; }
        .cart-icon { position:relative; cursor:pointer; }
        .cart-count {
            position:absolute; top:-10px; right:-10px; background:red; color:#fff; border-radius:50%;
            width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:12px;
        }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .products-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px; margin-bottom:40px; }
        .product-card { background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
        .product-image {
            width:100%; height:200px; background:#ddd; border-radius:4px; margin-bottom:10px;
            display:flex; align-items:center; justify-content:center; font-size:80px;
        }
        .product-name { font-size:18px; font-weight:bold; margin-bottom:10px; }
        .product-price { color:#28a745; font-size:20px; margin-bottom:15px; }
        .add-to-cart-btn { width:100%; padding:10px; background:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:16px; }
        .add-to-cart-btn:hover { background:#0056b3; }
        .cart-section { background:#fff; padding:20px; border-radius:8px; }
        .cart-item {
            display:flex; justify-content:space-between; align-items:center;
            padding:15px 0; border-bottom:1px solid #eee;
        }
        .quantity-controls { display:flex; gap:10px; align-items:center; }
        .quantity-controls button { width:50px; height:30px; border:1px solid #ddd; background:#fff; cursor:pointer; border-radius:4px; }
        .cart-total { text-align:right; font-size:24px; font-weight:bold; padding:20px 0 0; border-top:2px solid #333; }
        .empty { color:#666; padding:10px 0; }
        .item-left { display:flex; align-items:center; gap:12px; }
        .item-name { font-weight:600; }
        .remove-btn { border:0; background:transparent; color:#d33; cursor:pointer; font-size: 12.5px;}
        .muted { color:#666; font-size:14px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>My Shop</h1>
        <div class="cart-icon" onclick="toggleCart()">
            ðŸ›’ Cart
            <span class="cart-count" id="cartCount">0</span>
        </div>
    </div>

    <div class="container">
        <h2>Products</h2>
        <div class="products-grid" id="productsGrid"></div>
        
        <div class="cart-section" id="cartSection" style="display: none;">
            <h2>Shopping Cart</h2>
            <div id="cartItems"></div>
            <div class="cart-total">
                Total: $<span id="cartTotal">0.00</span>
            </div>
        </div>
    </div>

    <script>
        // Product data
        const products = [
            { id: 1, name: 'Laptop', price: 999.99, image: 'ðŸ’»' },
            { id: 2, name: 'Smartphone', price: 699.99, image: 'ðŸ“±' },
            { id: 3, name: 'Headphones', price: 199.99, image: 'ðŸŽ§' },
            { id: 4, name: 'Smartwatch', price: 299.99, image: 'âŒš' }
        ];

        // Cart array
        let cart = [];

        // ===== TODOs implemented =====

        function addToCart(productId) {
            // Add product to cart or increase quantity
            const product = products.find(p => p.id === productId);
            const existing = cart.find(item => item.id === productId);
            if (existing) {
                existing.qty += 1;
            } else {
                cart.push({ id: product.id, name: product.name, price: product.price, image: product.image, qty: 1 });
            }
            renderCart();
        }
        
        function removeFromCart(itemId) {
            // Remove item completely from cart
            cart = cart.filter(item => item.id !== itemId);
            renderCart();
        }
        
        function updateQuantity(productId, change) {
            // Update item quantity (change is +1 or -1)
            const item = cart.find(i => i.id === productId);
            item.qty += change;
            if (item.qty <= 0) {
                cart = cart.filter(i => i.id !== productId);
            }
            renderCart();
        }
        
        function calculateTotal() {
            // Calculate total price & update UI counters
            const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
            document.getElementById('cartTotal').textContent = total.toFixed(2);
            const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cartCount').textContent = totalQty;

            return total;
        }
        
        function renderProducts() {
            // Display products
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = products.map(p => `
                <div class="product-card">
                    <div class="product-image">${p.image}</div>
                    <div class="product-name">${p.name}</div>
                    <div class="product-price">$${p.price.toFixed(2)}</div>
                    <button class="add-to-cart-btn" onclick="addToCart(${p.id})">Add to Cart</button>
                </div>
            `).join('');
        }
        
        function renderCart() {
            // Display cart items
            const itemsEl = document.getElementById('cartItems');
            const section = document.getElementById('cartSection');

            if (cart.length === 0) {
                itemsEl.innerHTML = `<div class="empty">Your cart is empty.</div>`;
            } else {
                itemsEl.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <div class="item-left">
                            <div class="product-image" style="width:48px;height:48px;font-size:28px">${item.image}</div>
                            <div>
                                <div class="item-name">${item.name}</div>
                                <div class="muted">$${item.price.toFixed(2)} each</div>
                            </div>
                        </div>
                        <div class="quantity-controls">
                            <button onclick="updateQuantity(${item.id}, -1)">âˆ’</button>
                            <span>${item.qty}</span>
                            <button onclick="updateQuantity(${item.id}, 1)">+</button>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                        </div>
                    </div>
                `).join('');
            }

            calculateTotal();

            if (cart.length > 0) {
                section.style.display = 'block';
            } else {
                section.style.display = 'none';
            }
        }
        
        function toggleCart() {
            // Show/hide cart section
            const section = document.getElementById('cartSection');
            section.style.display = (section.style.display === 'none' || section.style.display === '') ? 'block' : 'none';
        }

        renderProducts();
    </script>
</body>
</html>
